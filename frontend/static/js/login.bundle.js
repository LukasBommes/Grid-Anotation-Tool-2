(()=>{"use strict";var e=function(e,n,t=null,o=null,l=!0){const r={method:e};let u={};return l&&(u.Authorization="Bearer "+localStorage.getItem("access_token")),t?(r.body=JSON.stringify(t),u["Content-Type"]="application/json"):o&&(r.body=o),r.headers=new Headers(u),fetch(n,r)},n=function(){let n=API_URL;return{getProjects:function(t,o,l,r){return e("GET",`${n}/projects/?skip=${t}&limit=${o}&orderby=${l}&orderdir=${r}`,null,null,!0)},getProject:function(t){return e("GET",`${n}/project/${t}`,null,null,!0)},deleteProject:function(t){return e("DELETE",`${n}/project/${t}`,null,null,!0)},createProject:function(t){return e("POST",`${n}/projects/`,t,null,!0)},updateProject:function(t,o){return e("PUT",`${n}/project/${t}`,o,null,!0)},getAnnotationIds:function(){return e("GET",`${n}/annotation_ids/`,null,null,!0)},exportProject:function(t){return e("GET",`${n}/export/${t}`,null,null,!0)},importProject:function(t){return e("POST",`${n}/import/`,null,t,!0)},getImages:function(t){return e("GET",`${n}/project/${t}/images/`,null,null,!0)},getImageFile:function(t){return e("GET",`${n}/image_file/${t}`,null,null,!0)},createImages:function(t,o){return e("POST",`${n}/project/${t}/images/`,null,o,!0)},deleteImage:function(t){return e("DELETE",`${n}/image/${t}`,null,null,!0)},getAnnotation:function(t){return e("GET",`${n}/annotation/${t}`,null,null,!0)},updateAnnotation:function(t,o){return e("PUT",`${n}/annotation/${t}`,o,null,!0)},createUser:function(t){return e("POST",`${n}/users/`,t,null,!1)},loginUser:function(t){return e("POST",`${n}/token`,null,t,!1)},isValid:function(t){return e("GET",`${n}/isvalid/${t}`,null,null,!1)}}}();const t={username:new mdc.textField.MDCTextField(document.querySelector("#text-field-username")),password:new mdc.textField.MDCTextField(document.querySelector("#text-field-password"))};document.getElementById("login-form-submit-button").addEventListener("click",(function(){console.log("clicked login");const e=document.getElementById("text-field-username-input").value,o=document.getElementById("text-field-password-input").value,l=new FormData;l.append("username",e),l.append("password",o),async function(e){var o=await n.loginUser(e);if(200==o.status){var l=await o.json();localStorage.setItem("access_token",l.access_token),console.log("Set JWT acces token: "+l.access_token),console.log("User logged in"),window.location.href=FRONTEND_URLS.projects}else if(401==o.status){const e=await o.json();document.querySelector(".alert-banner-text").innerHTML=e.detail,document.querySelector(".alert-banner").style.display="flex"}else{if(422!=o.status)throw new Error("Unknown error when logging in.");{const e=await o.json();!function(e,n){n.detail.forEach((n=>{const t=n.loc[1];console.log(t),e[t].helperTextContent=n.msg,e[t].valid=!1}))}(t,e)}}}(l)})),document.getElementById("alert-banner-icon").addEventListener("click",(function(){document.getElementById("alert-banner-icon").parentElement.style.display="none"}))})();
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/api.js":
/*!********************!*\
  !*** ./src/api.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"apiService\": () => (/* binding */ apiService)\n/* harmony export */ });\nvar fetchService = function() {\n\n    let makeFetchRequest = function(httpMethod, url, data=null, formData=null, authorization=true) {\n\n        const options = {\n            method: httpMethod\n        }\n\n        let headers = {};\n        if (authorization) {\n            headers['Authorization'] = 'Bearer ' + localStorage.getItem(\"access_token\")\n        }\n\n        if (data) {\n            options.body = JSON.stringify(data);\n            headers['Content-Type'] = 'application/json';\n        } \n        else if (formData) {\n            options.body = formData;\n        }\n\n        options.headers = new Headers(headers);\n\n        let responsePromise = fetch(url, options);\n\n        return responsePromise;\n    }\n\n    // public API\n    return {\n        makeFetchRequest: makeFetchRequest\n    }\n\n}();\n\n\nvar apiService = function() {\n\n    let apiUrl = API_URL;\n\n    let getProjects = function(skip, limit, orderby, orderdir) {\n        let url = `${apiUrl}/projects/?skip=${skip}&limit=${limit}&orderby=${orderby}&orderdir=${orderdir}`;\n        return fetchService.makeFetchRequest('GET', url, null, null, true);\n    }\n\n    let getProject = function(projectId) {\n        let url = `${apiUrl}/project/${projectId}`;\n        return fetchService.makeFetchRequest('GET', url, null, null, true);\n    }\n\n    let deleteProject = function(projectId) {\n        let url = `${apiUrl}/project/${projectId}`;\n        return fetchService.makeFetchRequest('DELETE', url, null, null, true);\n    }\n\n    let createProject = function(projectData) {\n        let url = `${apiUrl}/projects/`;\n        return fetchService.makeFetchRequest('POST', url, projectData, null, true);\n    }\n\n    let updateProject = function(projectId, projectData) {\n        let url = `${apiUrl}/project/${projectId}`\n        return fetchService.makeFetchRequest('PUT', url, projectData, null, true);\n    }\n\n    let getAnnotationIds = function() {\n        let url = `${apiUrl}/annotation_ids/`;\n        return fetchService.makeFetchRequest('GET', url, null, null, true);\n    }\n\n    let exportProject = function(projectId) {\n        let url = `${apiUrl}/export/${projectId}`;\n        return fetchService.makeFetchRequest('GET', url, null, null, true);\n    }\n\n    let importProject = function(importProjectData) {\n        let url = `${apiUrl}/import/`;\n        return fetchService.makeFetchRequest('POST', url, null, importProjectData, true);\n    }\n\n    let getImages = function(projectId) {\n        let url = `${apiUrl}/project/${projectId}/images/`;\n        return fetchService.makeFetchRequest('GET', url, null, null, true);\n    }\n\n    let getImageFile = function(imageId) {\n        let url = `${apiUrl}/image_file/${imageId}`;\n        return fetchService.makeFetchRequest('GET', url, null, null, true);\n    }\n\n    let createImages = function(projectId, imagesData) {\n        let url = `${apiUrl}/project/${projectId}/images/`;\n        return fetchService.makeFetchRequest('POST', url, null, imagesData, true);\n    }\n\n    let deleteImage = function(imageId) {\n        let url = `${apiUrl}/image/${imageId}`;\n        return fetchService.makeFetchRequest('DELETE', url, null, null, true);\n    }\n\n    let getAnnotation = function(imageId) {\n        let url = `${apiUrl}/annotation/${imageId}`;\n        return fetchService.makeFetchRequest('GET', url, null, null, true);\n    }\n\n    let updateAnnotation = function(imageId, annotationData) {\n        let url = `${apiUrl}/annotation/${imageId}`;\n        return fetchService.makeFetchRequest('PUT', url, annotationData, null, true);\n    }\n\n    let createUser = function(userData) {\n        let url = `${apiUrl}/users/`;\n        return fetchService.makeFetchRequest('POST', url, userData, null, false);\n    }\n\n    let loginUser = function(userData) {\n        let url = `${apiUrl}/token`;\n        return fetchService.makeFetchRequest('POST', url, null, userData, false);\n    }\n\n    let isValid = function(accessToken) {\n        let url = `${apiUrl}/isvalid/${accessToken}`;\n        return fetchService.makeFetchRequest('GET', url, null, null, false);\n    }\n\n    // public API\n    return {\n        getProjects: getProjects,\n        getProject: getProject,\n        deleteProject: deleteProject,\n        createProject: createProject,\n        updateProject: updateProject,\n        getAnnotationIds: getAnnotationIds,\n        exportProject: exportProject,\n        importProject: importProject,\n        getImages: getImages,\n        getImageFile: getImageFile,\n        createImages: createImages,\n        deleteImage: deleteImage,\n        getAnnotation: getAnnotation,\n        updateAnnotation: updateAnnotation,\n        createUser: createUser,\n        loginUser: loginUser,\n        isValid: isValid\n    }\n\n}();\n\n\n\n\n//# sourceURL=webpack://frontend/./src/api.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"entrypoint\": () => (/* binding */ entrypoint),\n/* harmony export */   \"exportProjectClicked\": () => (/* binding */ exportProjectClicked),\n/* harmony export */   \"getAnnotationIds\": () => (/* binding */ getAnnotationIds),\n/* harmony export */   \"getImageUrl\": () => (/* binding */ getImageUrl),\n/* harmony export */   \"htmlToElements\": () => (/* binding */ htmlToElements),\n/* harmony export */   \"parseValidationErrors\": () => (/* binding */ parseValidationErrors),\n/* harmony export */   \"redirectToLogin\": () => (/* binding */ redirectToLogin),\n/* harmony export */   \"redirectToProjects\": () => (/* binding */ redirectToProjects),\n/* harmony export */   \"setupProjectClicked\": () => (/* binding */ setupProjectClicked),\n/* harmony export */   \"uuidv4\": () => (/* binding */ uuidv4)\n/* harmony export */ });\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api.js */ \"./src/api.js\");\n\n\n\nasync function getAnnotationIds() { // async function getAnnotationIds() leads to weird error because it overwrites above definition\n    var response = await _api_js__WEBPACK_IMPORTED_MODULE_0__.apiService.getAnnotationIds();\n\n    if (response.status == 200) {\n        const existing_anotations = await response.json();\n        return existing_anotations;\n    } else if (response.status == 401) {\n        redirectToLogin();\n    } else {\n        throw new Error(`Failed to get annotation ids`);\n    }\n}\n\nconst snackbar = new mdc.snackbar.MDCSnackbar(document.querySelector('.mdc-snackbar'));\n\nasync function entrypoint(entrypointFunc) {\n    const loggedIn = await userIsLoggedIn();\n    if (!loggedIn) {\n        redirectToLogin();\n    }\n    else {\n        entrypointFunc();\n    }\n}\n\nasync function userIsLoggedIn() {\n    const access_token = localStorage.getItem('access_token');\n    if (!access_token) {\n        return false;\n    }\n\n    // check if access token is not expired yet\n    var response = await _api_js__WEBPACK_IMPORTED_MODULE_0__.apiService.isValid(access_token);\n    // check if access token is not expired yet\n    if (response.status == 200) {\n        const status = await response.json();\n        return status.isvalid;\n    } else {\n        throw new Error(\"Failed to determine whether user is logged in\");\n    }\n}\n    \nfunction redirectToLogin() {\n    window.location.href = FRONTEND_URLS.login;\n}\n\nasync function loginButtonClicked() {\n    const loggedIn = await userIsLoggedIn();\n    if (loggedIn) {\n    logout();\n    } else {\n    redirectToLogin();\n    }\n}\n\nsetLoginButton();\n\nasync function setLoginButton() {\n    const login_button_label = document.getElementById(\"login-button-label\");\n    const login_button_icon = document.getElementById(\"login-button-icon\");\n    const loggedIn = await userIsLoggedIn();\n    if (loggedIn) {\n    console.log(\"setting button\")\n    login_button_label.innerHTML = \"Sign out\";\n    login_button_icon.innerHTML = \"logout\";\n    } else {\n    login_button_label.innerHTML = \"Login\";\n    login_button_icon.innerHTML = \"login\";\n    }\n}\n\nfunction logout() {\n    localStorage.removeItem('access_token');\n    console.log(\"Logged out\");\n    redirectToLogin();\n}\n\n// UUID creation, taken from: https://stackoverflow.com/a/2117523\nfunction uuidv4() {\n    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n      (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n}\n\nfunction htmlToElements(html) {\n    var template = document.createElement('template');\n    template.innerHTML = html;\n    return template.content;\n}\n\nfunction redirectToProjects() {\n    window.location.href = FRONTEND_URLS.projects;\n}\n\nfunction homeButtonClicked() {\n    redirectToProjects();\n}\n\nfunction parseValidationErrors(textFields, errors) {\n    errors[\"detail\"].forEach((error) => {\n        const fieldname = error.loc[1];\n        console.log(fieldname);\n        textFields[fieldname].helperTextContent = error.msg;\n        textFields[fieldname].valid = false;                \n    });\n}\n\nasync function setupProjectClicked(project_id) {\n  const url = FRONTEND_URLS.getEditProjectUrl+\"?project_id=\"+project_id;\n  const options = {\n      method: 'GET',\n      headers: new Headers({\n          'Authorization': 'Bearer ' + localStorage.getItem(\"access_token\")\n      })\n  }\n\n  let response = await fetch(url, options);\n\n  if (response.status == 200) {\n      const data = await response.json();\n      window.location.href = data.url;\n  } else if (response.status == 401) {\n      redirectToLogin();\n  } else {\n      throw new Error(`Failed to get url for setting up project with id ${project_id}`);\n  }\n}\n\nasync function exportProjectClicked(project_id) {\n    var response = await _api_js__WEBPACK_IMPORTED_MODULE_0__.apiService.exportProject(project_id);\n\n    if (response.status == 200) {\n        // get filename\n        const disposition = response.headers.get('Content-Disposition');\n        filename = disposition.split(/;(.+)/)[1].split(/=(.+)/)[1];\n        if (filename.toLowerCase().startsWith(\"utf-8''\")) {\n            filename = decodeURIComponent(filename.replace(\"utf-8''\", ''));\n        } else {\n            filename = filename.replace(/['\"]/g, '');\n        }\n        // get data\n        const fileBlob = await response.blob();\n        // download file\n        var a = document.createElement('a');\n        a.href = URL.createObjectURL(fileBlob);\n        a.download = filename;\n        document.body.appendChild(a); // append the element to the dom, otherwise it won't work in Firefox\n        a.click();\n        a.remove();\n    } else if (response.status == 401) {\n        redirectToLogin();\n    } else {\n        throw new Error(`Failed to export project with id ${project_id}`);\n    }\n}\n\nasync function getImageUrl(image_id) {\n    var response = await _api_js__WEBPACK_IMPORTED_MODULE_0__.apiService.getImageFile(image_id);\n\n    if (response.status == 200) {\n        const imageBlob = await response.blob();\n        const imageURL = URL.createObjectURL(imageBlob);\n        return imageURL;\n    } else if (response.status == 401) {\n        redirectToLogin();\n    } else {\n        throw new Error(`Failed to get image file with id ${image_id}`);\n    }\n}\n\nconst iconButtonRipples = [].map.call(document.querySelectorAll('.app-bar-icon-button'), function(element) {\n    const ripple = new mdc.ripple.MDCRipple(element);\n    ripple.unbounded = true;\n    return ripple;\n});\n\nconst textfields = [].map.call(document.querySelectorAll('.mdc-text-field'), function(element) {\n    return new mdc.textField.MDCTextField(element);\n});\n\nconst tooltips = [].map.call(document.querySelectorAll('.mdc-tooltip'), function(element) {\n    const tooltip = new mdc.tooltip.MDCTooltip(element);\n    tooltip.setShowDelay(500);\n    tooltip.setHideDelay(0);\n    return tooltip;\n});\n\n\n\n//# sourceURL=webpack://frontend/./src/index.js?");

/***/ }),

/***/ "./src/projects.js":
/*!*************************!*\
  !*** ./src/projects.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"loadProjects\": () => (/* binding */ loadProjects)\n/* harmony export */ });\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api.js */ \"./src/api.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ \"./src/index.js\");\n\n\n\n\nconst project_list_menus = {};\n\nconst project_delete_success_msg = \"Project deleted.\";\nconst project_delete_error_msg = \"Failed to delete project.\";\nconst project_imported_success_msg = \"Project imported.\";\nconst project_imported_error_msg = \"Failed to import project\";\n\n// pagination and ordering\nvar total_num_projects = 0;\nvar projects_per_page = 3;\nvar pagination_num_neighbours = 2;\nvar projects_orderby = \"name\";\nvar projects_orderdir = \"asc\";\n\nconst delete_project_dialog = new mdc.dialog.MDCDialog(document.querySelector('#delete-project-dialog'));\nvar deleteProjectDialogEventListener;\n\nconst orderby_menu = new mdc.menu.MDCMenu(document.querySelector('.mdc-menu'));\n\n\ndocument.getElementById(\"import-project-input\").addEventListener('change', importProjectFilesInputChanged);\ndocument.getElementById(\"orderby-menu-open-button\").addEventListener('click', openOrderByMenuClicked);\ndocument.getElementById(\"new-project-button\").addEventListener('click', newProjectButtonClicked);\ndocument.getElementById(`orderby-menu-name-asc`).addEventListener('click', orderBy.bind(null, 'name', 'asc'));\ndocument.getElementById(`orderby-menu-name-desc`).addEventListener('click', orderBy.bind(null, 'name', 'desc'));\ndocument.getElementById(`orderby-menu-created-asc`).addEventListener('click', orderBy.bind(null, 'created', 'asc'));\ndocument.getElementById(`orderby-menu-created-desc`).addEventListener('click', orderBy.bind(null, 'created', 'desc'));\ndocument.getElementById(`orderby-menu-edited-asc`).addEventListener('click', orderBy.bind(null, 'edited', 'asc'));\ndocument.getElementById(`orderby-menu-edited-desc`).addEventListener('click', orderBy.bind(null, 'edited', 'desc'));\ndocument.getElementById(`button-pagination-first`).addEventListener('click', goToPage.bind(null, \"first\"));\ndocument.getElementById(`button-pagination-last`).addEventListener('click', goToPage.bind(null, \"last\"));\n\n(0,_index_js__WEBPACK_IMPORTED_MODULE_1__.entrypoint)(() => {\n    loadProjects();\n});\n\nasync function getProjects(existing_anotations, skip=0, limit=10, orderby=\"name\", orderdir=\"asc\") {\n    var response = await _api_js__WEBPACK_IMPORTED_MODULE_0__.apiService.getProjects(skip, limit, orderby, orderdir);\n\n    if (response.status == 200) {\n        total_num_projects = response.headers.get('X-Total-Count');\n        const data = await response.json();\n        data.forEach((project) => {\n            const num_images = project.images.length;\n            const num_annotated = countAnnotatedImages(project.images, existing_anotations);\n            addProjectToProjectList(project, num_images, num_annotated);\n        });\n    } else if (response.status == 401) {\n        (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.redirectToLogin)();\n    } else {\n        throw new Error(`Failed to get projects`);\n    }\n}\n\nasync function deleteProject(project_id) {\n    var response = await _api_js__WEBPACK_IMPORTED_MODULE_0__.apiService.deleteProject(project_id)\n\n    if (response.status == 200) {\n        console.log(project_delete_success_msg);\n        snackbar.labelText = project_delete_success_msg;\n        snackbar.open();\n    } else if (response.status == 401) {\n        (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.redirectToLogin)();\n    } else {\n        console.log(project_delete_error_msg);\n        snackbar.labelText = project_delete_error_msg;\n        snackbar.open();\n        throw new Error(`Failed to delete project with id ${project_id}`);\n    }\n    loadProjects();\n}\n\nasync function importProject(importProjectData) {\n    var response = await _api_js__WEBPACK_IMPORTED_MODULE_0__.apiService.importProject(importProjectData);\n\n    if (response.status == 201) {\n        console.log(project_imported_success_msg);\n        snackbar.labelText = project_imported_success_msg;\n        snackbar.open();\n    } else if (response.status == 401) {\n        (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.redirectToLogin)();\n    } else {\n        console.log(project_imported_error_msg);\n        snackbar.labelText = project_imported_error_msg;    \n        snackbar.open();\n        throw new Error(`Failed to import project`);\n    }\n}\n\nfunction makePagination() {\n    var num_pages = Math.ceil(total_num_projects / projects_per_page);\n    if (num_pages > 1) {\n        const pagination = document.getElementById(\"pagination-projects\").querySelector(\".pagination-main\");\n        pagination.innerHTML = '';\n        for (var page_num = 1; page_num <= num_pages; page_num++) {\n            const html = `\n                <button id=\"button-pagination-${page_num}\" class=\"mdc-button button-pagination\" style=\"display: none;\">\n                    <span class=\"mdc-button__ripple\"></span>\n                    <span class=\"mdc-button__focus-ring\"></span>\n                    <span class=\"mdc-button__label\">${page_num}</span>\n                </button>`;\n            pagination.appendChild((0,_index_js__WEBPACK_IMPORTED_MODULE_1__.htmlToElements)(html));\n            document.getElementById(`button-pagination-${page_num}`).addEventListener('click', goToPage.bind(null, page_num));\n        }\n    } else {\n        document.getElementById(\"pagination-projects\").style.display = \"none\";\n    }\n}\n\nfunction updatePagination(page_num) {\n    // compute which page numbers to show in pagination\n    var num_pages = Math.ceil(total_num_projects / projects_per_page);\n    var left = page_num - pagination_num_neighbours;\n    var right = left + 2*pagination_num_neighbours;\n    var num_add_right = Math.max(0, 1 - left);\n    var num_add_left = -1*Math.min(0, num_pages - right);\n\n    // show only the active element and its neighbours\n    const dots_left = document.getElementById(\"pagination-projects\").querySelector(\".pagination-dots-left\");\n    const dots_right = document.getElementById(\"pagination-projects\").querySelector(\".pagination-dots-right\");\n    dots_left.style.display = \"inline\";\n    dots_right.style.display = \"inline\";\n\n    for (var i = 1; i <= num_pages; i++) {\n        const button = document.getElementById(`button-pagination-${i}`);\n        if ((i >= (left-num_add_left)) && (i <= (right+num_add_right))) {\n            button.style.display = \"inline\";\n            if (i == 1) {\n                dots_left.style.display = \"none\"; // if page 1 is visible, hide pagination-dots-left\n            }\n            if (i == num_pages) {\n                dots_right.style.display = \"none\";  // if last page is visible, hide pagination-dots-rights\n            }\n        } else {\n            button.style.display = \"none\";\n        }\n    }\n    highlightActivePage(page_num);  \n}\n\nfunction highlightActivePage(page_num) {\n    const pagination = document.getElementById(\"pagination-projects\");\n    const pagination_buttons = pagination.querySelector(\".pagination-main\");\n    Array.from(pagination_buttons.children).forEach((button) => {\n        button.classList.remove(\"button-pagination-active\");\n    })\n    pagination_buttons.querySelector(`#button-pagination-${page_num}`).classList.add(\"button-pagination-active\");\n}\n\nasync function goToPage(page_num) {\n    // page_num is 1-based\n    if (page_num == \"first\") {\n        page_num = 1;\n    } else if (page_num == \"last\") {\n        var num_pages = Math.ceil(total_num_projects / projects_per_page);\n        page_num = num_pages;\n    }\n    var skip = (page_num-1) * projects_per_page;\n    updatePagination(page_num);      \n    const existing_anotations = await (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.getAnnotationIds)();\n    clearProjectsList();\n    getProjects(existing_anotations, skip, projects_per_page, projects_orderby, projects_orderdir);\n}\n\nfunction clearProjectsList() {\n    document.getElementById(\"projects-list\").innerHTML = '';\n    document.getElementById(\"projects-list-menu-list\").innerHTML = '';\n}\n\nasync function loadProjects() {        \n    const existing_anotations = await (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.getAnnotationIds)();\n    clearProjectsList();\n    await getProjects(existing_anotations, 0, projects_per_page, \"name\", \"asc\");\n    makePagination();\n    updatePagination(1);\n}\n\nfunction addProjectToProjectList(project, num_images, num_annotated) {\n    const created = new Date(project.created).toLocaleString(\"en-GB\"); \n    const edited = new Date(project.edited).toLocaleString(\"en-GB\");\n    const html_list_item = `\n        <li class=\"mdc-list-item mdc-list-item--with-two-lines mdc-list-item--with-trailing-image\" id=\"projects-list-item-${project.id}\">\n            <span class=\"mdc-list-item__ripple\"></span>\n            <span class=\"mdc-list-item__start\"></span>\n            <span class=\"mdc-list-item__content\">\n                <span class=\"mdc-list-item__primary-text\">${project.name}</span>\n                <span class=\"mdc-list-item__secondary-text\">${num_annotated} / ${num_images} images annotated | created ${created} | modified ${edited}</span>\n            </span>\n            <span class=\"mdc-list-item__end list-item-end-custom\">\n                <button class=\"mdc-icon-button material-icons\" id=\"projects-list-item-menu-button-${project.id}\">\n                    <div class=\"mdc-icon-button__ripple\"></div>\n                    <span class=\"mdc-icon-button__focus-ring\"></span>\n                    more_vert\n                </button>\n            </span>\n        </li>`;\n    const html_menu_item = `\n        <div class=\"mdc-menu mdc-menu-surface\" id=\"projects-list-menu-${project.id}\">\n            <ul class=\"mdc-deprecated-list\" role=\"menu\" aria-hidden=\"true\" aria-orientation=\"vertical\" tabindex=\"-1\">\n                <li class=\"mdc-deprecated-list-item\" role=\"menuitem\" id=\"projects-list-menu-annotate-${project.id}\">\n                    <span class=\"mdc-deprecated-list-item__ripple\"></span>\n                    <span class=\"mdc-deprecated-list-item__text\">Annotate</span>\n                    <span class=\"mdc-deprecated-list-item__meta\">\n                        <i class=\"material-icons menu-icon\">edit</i>\n                    </span>\n                </li>\n                <li class=\"mdc-deprecated-list-item\" role=\"menuitem\" id=\"projects-list-menu-setup-${project.id}\">\n                    <span class=\"mdc-deprecated-list-item__ripple\"></span>\n                    <span class=\"mdc-deprecated-list-item__text\">Setup</span>\n                    <span class=\"mdc-deprecated-list-item__meta\">\n                        <i class=\"material-icons menu-icon\">build</i>\n                    </span>\n                </li>\n                <li class=\"mdc-deprecated-list-item\" role=\"menuitem\" id=\"projects-list-menu-export-${project.id}\">\n                    <span class=\"mdc-deprecated-list-item__ripple\"></span>\n                    <span class=\"mdc-deprecated-list-item__text\">Export</span>\n                    <span class=\"mdc-deprecated-list-item__meta\">\n                        <i class=\"material-icons menu-icon\">download</i>\n                    </span>\n                </li>\n                <li class=\"mdc-deprecated-list-item\" role=\"menuitem\" id=\"projects-list-menu-delete-${project.id}\">\n                    <span class=\"mdc-deprecated-list-item__ripple\"></span>\n                    <span class=\"mdc-deprecated-list-item__text\">Delete</span>\n                    <span class=\"mdc-deprecated-list-item__meta\">\n                        <i class=\"material-icons menu-icon\">delete</i>\n                    </span>\n                </li>\n            </ul>\n        </div>`;\n    document.getElementById('projects-list').appendChild((0,_index_js__WEBPACK_IMPORTED_MODULE_1__.htmlToElements)(html_list_item));\n    document.getElementById('projects-list-menu-list').appendChild((0,_index_js__WEBPACK_IMPORTED_MODULE_1__.htmlToElements)(html_menu_item));\n\n    document.getElementById(`projects-list-item-${project.id}`).addEventListener('click', annotateProjectClicked.bind(null, project.id));\n    document.getElementById(`projects-list-item-menu-button-${project.id}`).addEventListener('click', openMenu.bind(null, project.id));\n    document.getElementById(`projects-list-menu-annotate-${project.id}`).addEventListener('click', annotateProjectClicked.bind(null, project.id));\n    document.getElementById(`projects-list-menu-setup-${project.id}`).addEventListener('click', _index_js__WEBPACK_IMPORTED_MODULE_1__.setupProjectClicked.bind(null, project.id));\n    document.getElementById(`projects-list-menu-export-${project.id}`).addEventListener('click', _index_js__WEBPACK_IMPORTED_MODULE_1__.exportProjectClicked.bind(null, project.id));\n    document.getElementById(`projects-list-menu-delete-${project.id}`).addEventListener('click', deleteProjectClicked.bind(null, project.id));\n    project_list_menus[project.id] = new mdc.menu.MDCMenu(document.querySelector(`#projects-list-menu-${project.id}`));\n    init_mui_elements();\n}\n\nfunction countAnnotatedImages(images, existing_anotations) {\n    var num_annotated = 0;\n    for (var i = 0; i < images.length; i++) {\n        if (existing_anotations.includes(images[i].id)) {\n            num_annotated++;\n        }\n    }\n    return num_annotated;\n}\n\nfunction openMenu(project_id, event) {\n    const menu = project_list_menus[project_id];\n    menu.setAbsolutePosition(event.clientX, event.clientY);\n    menu.open = !menu.open;\n    event.stopPropagation();\n}\n\nasync function annotateProjectClicked(project_id) {\n  const url = FRONTEND_URLS.getEditorUrl+\"?project_id=\"+project_id;\n  const options = {\n      method: 'GET',\n      headers: new Headers({\n          'Authorization': 'Bearer ' + localStorage.getItem(\"access_token\")\n      })\n  }\n\n  let response = await fetch(url, options);\n\n  if (response.status == 200) {\n      const data = await response.json();\n      window.location.href = data.url;\n  } else if (response.status == 401) {\n      (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.redirectToLogin)();\n  } else {\n      throw new Error(`Failed to get url for annotating project with id ${project_id}`);\n  }\n}\n\nfunction deleteProjectClicked(project_id) {\n    const button_yes = document.getElementById(\"delete-project-dialog-button\");\n    button_yes.removeEventListener('click', deleteProjectDialogEventListener);\n    deleteProjectDialogEventListener = deleteProject.bind(null, project_id);\n    button_yes.addEventListener('click', deleteProjectDialogEventListener);\n    delete_project_dialog.open();\n}\n\nasync function importProjectFilesInputChanged(event) {\n    const file = event.target.files[0];\n    var importProjectData = new FormData();\n    importProjectData.append(\"file\", file);\n    await importProject(importProjectData);\n    loadProjects();\n    event.target.value = null;  // to trigger onchange event even if the same file was selected\n}\n\nfunction newProjectButtonClicked() {\n    window.location.href = FRONTEND_URLS.addProject;\n}\n\nfunction openOrderByMenuClicked() {\n    orderby_menu.open = !orderby_menu.open;\n}\n\nasync function orderBy(orderby, orderdir) {\n    const existing_anotations = await (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.getAnnotationIds)();\n    clearProjectsList();\n    projects_orderby = orderby;\n    projects_orderdir = orderdir;\n    await getProjects(existing_anotations, 0, projects_per_page, projects_orderby, projects_orderdir);\n    goToPage(\"first\");\n}\n\nfunction init_mui_elements() {\n    const listItemRipples = [].map.call(document.querySelectorAll('.mdc-list-item'), function(element) {\n        return new mdc.ripple.MDCRipple(element);\n    });\n}\n\n\n\n\n//# sourceURL=webpack://frontend/./src/projects.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/projects.js");
/******/ 	
/******/ })()
;
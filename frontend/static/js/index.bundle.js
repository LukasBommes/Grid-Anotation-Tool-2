(()=>{"use strict";var n=function(n,t,e=null,o=null,l=!0){const r={method:n};let u={};return l&&(u.Authorization="Bearer "+localStorage.getItem("access_token")),e?(r.body=JSON.stringify(e),u["Content-Type"]="application/json"):o&&(r.body=o),r.headers=new Headers(u),fetch(t,r)},t=function(){let t=API_URL;return{getProjects:function(e,o,l,r){return n("GET",`${t}/projects/?skip=${e}&limit=${o}&orderby=${l}&orderdir=${r}`,null,null,!0)},getProject:function(e){return n("GET",`${t}/project/${e}`,null,null,!0)},deleteProject:function(e){return n("DELETE",`${t}/project/${e}`,null,null,!0)},createProject:function(e){return n("POST",`${t}/projects/`,e,null,!0)},updateProject:function(e,o){return n("PUT",`${t}/project/${e}`,o,null,!0)},getAnnotationIds:function(){return n("GET",`${t}/annotation_ids/`,null,null,!0)},exportProject:function(e){return n("GET",`${t}/export/${e}`,null,null,!0)},importProject:function(e){return n("POST",`${t}/import/`,null,e,!0)},getImages:function(e){return n("GET",`${t}/project/${e}/images/`,null,null,!0)},getImageFile:function(e){return n("GET",`${t}/image_file/${e}`,null,null,!0)},createImages:function(e,o){return n("POST",`${t}/project/${e}/images/`,null,o,!0)},deleteImage:function(e){return n("DELETE",`${t}/image/${e}`,null,null,!0)},getAnnotation:function(e){return n("GET",`${t}/annotation/${e}`,null,null,!0)},updateAnnotation:function(e,o){return n("PUT",`${t}/annotation/${e}`,o,null,!0)},createUser:function(e){return n("POST",`${t}/users/`,e,null,!1)},loginUser:function(e){return n("POST",`${t}/token`,null,e,!1)},isValid:function(e){return n("GET",`${t}/isvalid/${e}`,null,null,!1)}}}();async function e(){const n=localStorage.getItem("access_token");if(!n)return!1;var e=await t.isValid(n);if(200==e.status)return(await e.json()).isvalid;throw new Error("Failed to determine whether user is logged in")}function o(){window.location.href=FRONTEND_URLS.login}document.getElementById("app-bar-home-button").addEventListener("click",(function(){window.location.href=FRONTEND_URLS.projects})),document.getElementById("app-bar-login-button").addEventListener("click",(async function(){await e()?(localStorage.removeItem("access_token"),console.log("Logged out"),o()):o()})),[].map.call(document.querySelectorAll(".app-bar-icon-button"),(function(n){const t=new mdc.ripple.MDCRipple(n);return t.unbounded=!0,t})),[].map.call(document.querySelectorAll(".mdc-text-field"),(function(n){return new mdc.textField.MDCTextField(n)})),[].map.call(document.querySelectorAll(".mdc-tooltip"),(function(n){const t=new mdc.tooltip.MDCTooltip(n);return t.setShowDelay(500),t.setHideDelay(0),t})),async function(){const n=document.getElementById("app-bar-login-button-label"),t=document.getElementById("app-bar-login-button-icon");await e()?(console.log("setting button"),n.innerHTML="Sign out",t.innerHTML="logout"):(n.innerHTML="Login",t.innerHTML="login")}()})();